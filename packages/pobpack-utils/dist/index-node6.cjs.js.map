{"version":3,"file":"index-node6.cjs.js","sources":["../src/createOptions.ts","../src/createAppWebpackConfig.ts","../src/FriendlyErrorsWebpackPlugin.ts","../src/createPobpackCompiler.ts","../src/webpack/createModuleConfig.ts","../src/webpack/createPluginsConfig.ts","../src/webpack/createResolveConfig.ts"],"sourcesContent":["import { Options } from 'pobpack-types';\n\nexport default (options: Partial<Options>): Options => ({\n  aliases: options.aliases || {},\n  babel: options.babel || {},\n  defines: options.defines || {},\n  entries: options.entries || ['index'],\n  env: options.env || process.env.NODE_ENV,\n  hmr: options.hmr,\n  includeModules: options.includeModules || [],\n  includePaths: options.includePaths || [],\n  jsLoaders: options.jsLoaders,\n  moduleRules: options.moduleRules,\n  paths: { src: 'src', build: 'build', ...options.paths },\n  plugins: options.plugins || [],\n  prependPlugins: options.prependPlugins || [],\n  resolveLoaderModules: options.resolveLoaderModules,\n  typescript: options.typescript || false,\n  webpackPrefixPackageFields: options.webpackPrefixPackageFields || [],\n});\n","import path from 'path';\nimport { existsSync } from 'fs';\nimport webpack from 'webpack';\nimport { Options } from 'pobpack-types';\nimport createOptions from './createOptions';\n\nexport type CreateWebpackConfig = (options: Options) => webpack.Configuration;\n\nexport default (createWebpackConfig: CreateWebpackConfig) => {\n  const wrapCreateWebpackConfig = (options: Partial<Options>) =>\n    createWebpackConfig(createOptions(options));\n\n  return (options: Partial<Options>) => {\n    const appWebpackConfigPath = path.resolve('createAppWebpackConfig.js');\n    if (existsSync(appWebpackConfigPath)) {\n      console.info('Using app createAppWebpackConfig.js');\n      // eslint-disable-next-line import/no-dynamic-require, global-require, typescript/no-var-requires\n      const appWebpackConfigCreator = require(appWebpackConfigPath);\n      if (typeof appWebpackConfigCreator !== 'function') {\n        console.error(\n          'app createAppWebpackConfig.js should export a function\\n' +\n            'module.exports = function (config, options) { ... }',\n        );\n      }\n\n      options = createOptions(options);\n      const config = appWebpackConfigCreator(wrapCreateWebpackConfig, options);\n\n      if (typeof config !== 'object') {\n        console.error(\n          'app createAppWebpackConfig.js should return the config\\n' +\n            'function (config, options) { return config(options); }',\n        );\n      }\n\n      return config;\n    } else {\n      return wrapCreateWebpackConfig(options);\n    }\n  };\n};\n","/* eslint-disable no-console */\n\nimport { addConfig, levels } from 'nightingale';\nimport Logger from 'nightingale-logger';\nimport ConsoleHandler from 'nightingale-console';\nimport formatWebpackMessages, { FormattedResult } from 'react-dev-utils/formatWebpackMessages';\nimport { Compiler } from 'webpack';\n\nexport interface Options {\n  bundleName: string;\n  successMessage?: string;\n}\n\naddConfig({ key: 'pobpack-utils', handler: new ConsoleHandler(levels.INFO) });\nconst logger = new Logger('pobpack-utils', 'pobpack');\nconst isSuccessful = (messages: FormattedResult) =>\n  !messages.errors.length && !messages.warnings.length;\n\nconst pluginName = 'pobpack/FriendlyErrorsWebpackPlugin';\n\nexport default class FriendlyErrorsWebpackPlugin {\n  logger: Logger;\n  bundleName: string;\n  successMessage?: string;\n\n  constructor(options: Options) {\n    this.bundleName = options.bundleName;\n    this.successMessage = options.successMessage;\n    this.logger = logger.context({ bundleName: options.bundleName });\n  }\n\n  apply(compiler: Compiler) {\n    // webpack is recompiling\n    compiler.hooks.invalid.tap(pluginName, () => {\n      this.logger.info('Compiling...');\n    });\n\n    // compilation done\n    compiler.hooks.done.tap(pluginName, stats => {\n      const messages = formatWebpackMessages(stats.toJson({}));\n      // const messages = stats.toJson({}, true);\n\n      if (isSuccessful(messages)) {\n        this.logger.success('Compiled successfully!');\n        if (this.successMessage) {\n          console.log(this.successMessage);\n        }\n        return;\n      }\n\n      if (messages.errors.length) {\n        this.logger.critical('Failed to compile.');\n        console.log();\n        messages.errors.forEach(message => {\n          console.log(message);\n          console.log();\n        });\n        return;\n      }\n\n      if (messages.warnings.length) {\n        this.logger.critical('Compiled with warnings.');\n        console.log();\n        messages.warnings.forEach(message => {\n          console.log(message);\n          console.log();\n        });\n      }\n    });\n  }\n}\n","import { execSync } from 'child_process';\nimport { promisify } from 'util';\nimport chalk from 'chalk';\nimport ProgressBar from 'progress';\nimport webpack, { ProgressPlugin, Stats } from 'webpack';\nimport { PobpackCompiler, CreateCompilerOptions } from 'pobpack-types';\nimport FriendlyErrorsWebpackPlugin from './FriendlyErrorsWebpackPlugin';\n\nconst buildThrowOnError = (stats: Stats) => {\n  if (!stats.hasErrors()) {\n    return stats;\n  }\n\n  throw new Error(stats.toString({}));\n};\n\nexport default (\n  bundleName: string,\n  webpackConfig: webpack.Configuration,\n  { progressBar = true, successMessage }: CreateCompilerOptions = {},\n): PobpackCompiler => {\n  const compiler = webpack({\n    ...webpackConfig,\n  });\n\n  if (progressBar && process.stdout.isTTY) {\n    let bar: ProgressBar;\n    const progressPlugin = new ProgressPlugin((percentage: number, msg: string) => {\n      if (percentage === 0) {\n        bar = new ProgressBar(\n          `${chalk.yellow.bold(`Building ${bundleName} bundle...`)} ${chalk.bold(\n            ':percent',\n          )} [:bar] → :msg`,\n          { incomplete: ' ', complete: '▇', total: 50, clear: true, stream: process.stdout },\n        );\n        // } else if (percentage === 1) {\n        //   // bar.clear();\n        //   bar = null;\n      } else {\n        bar.update(percentage, { msg: msg.length > 20 ? `${msg.substr(0, 20)}...` : msg });\n      }\n    });\n    progressPlugin.apply(compiler);\n  }\n\n  // human-readable error messages\n  new FriendlyErrorsWebpackPlugin({ bundleName, successMessage }).apply(compiler);\n\n  const promisifyRun = promisify(compiler.run.bind(compiler));\n\n  return {\n    compiler,\n    webpackConfig,\n    clean: (): void | Buffer => {\n      if (webpackConfig.output && webpackConfig.output.path) {\n        return execSync(`rm -Rf ${webpackConfig.output.path}`);\n      }\n    },\n    run: () => promisifyRun().then(buildThrowOnError),\n    watch: callback =>\n      compiler.watch({}, (err: Error, stats: Stats) => {\n        if (err) return;\n        if (stats.hasErrors()) return;\n        buildThrowOnError(stats);\n        callback(stats);\n      }),\n  };\n};\n","import { realpathSync } from 'fs';\nimport { resolve } from 'path';\nimport { Options } from 'pobpack-types';\n\nexport default (options: Options) => ({\n  strictExportPresence: true,\n\n  rules: [\n    // Disable require.ensure as it's not a standard language feature.\n    { parser: { requireEnsure: false } },\n\n    // tsx? / jsx?\n    {\n      test: options.typescript ? /\\.[tj]sx?$/ : /\\.jsx?$/,\n      include: [\n        resolve(options.paths.src as string),\n        ...options.includeModules.map(includeModule =>\n          realpathSync(resolve('node_modules', includeModule)),\n        ),\n        ...options.includePaths,\n      ],\n      loaders: [\n        {\n          loader: require.resolve('babel-loader'),\n          options: {\n            babelrc: false,\n            cacheDirectory: true,\n            ...options.babel,\n          },\n        },\n        ...(options.jsLoaders || []),\n      ],\n    },\n\n    // other rules\n    ...(options.moduleRules || []),\n  ],\n});\n","import webpack from 'webpack';\nimport CaseSensitivePathsPlugin from 'case-sensitive-paths-webpack-plugin';\nimport { Options } from 'pobpack-types';\n\nexport default (options: Options) =>\n  [\n    ...options.prependPlugins,\n\n    // ignore files when watching\n    new webpack.WatchIgnorePlugin([\n      // typescript definitions\n      /\\.d\\.ts$/,\n    ]),\n\n    // enforces the entire path of all required modules match the exact case\n    // of the actual path on disk. Using this plugin helps alleviate cases\n    // for developers working on case insensitive systems like OSX.\n    options.env !== 'production' && new CaseSensitivePathsPlugin(),\n\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(options.env),\n      ...options.defines,\n    }),\n\n    options.hmr && new webpack.HotModuleReplacementPlugin(),\n\n    /* replace object-assign ponyfill to use native implementation */\n\n    // Array.isArray\n    new webpack.NormalModuleReplacementPlugin(\n      /.*\\/node_modules\\/isarray\\/index.js$/,\n      require.resolve('../replacements/Array.isArray.js'),\n    ),\n\n    // Object.assign\n    new webpack.NormalModuleReplacementPlugin(\n      /.*\\/node_modules\\/(object-assign|extend-shallow)\\/index.js$/,\n      require.resolve('../replacements/Object.assign.js'),\n    ),\n\n    // Object.setPrototypeOf\n    new webpack.NormalModuleReplacementPlugin(\n      /.*\\/node_modules\\/setprototypeof\\/index.js$/,\n      require.resolve('../replacements/Object.setPrototypeOf.js'),\n    ),\n\n    // Promise\n    new webpack.NormalModuleReplacementPlugin(\n      /.*\\/node_modules\\/any-promise\\/index.js$/,\n      require.resolve('../replacements/Promise.js'),\n    ),\n\n    // String.prototype.repeat\n    new webpack.NormalModuleReplacementPlugin(\n      /.*\\/node_modules\\/repeat-string\\/index.js$/,\n      require.resolve('../replacements/String.prototype.repeat.js'),\n    ),\n\n    // Symbol.observable\n    // https://github.com/tc39/proposal-observable\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/observable\n    // new webpack.NormalModuleReplacementPlugin(\n    //   /.*\\/node_modules\\/symbol-observable\\/es\\/ponyfill.js$/,\n    //   require.resolve('../replacements/Symbol.observable.js'),\n    // ),\n\n    ...options.plugins,\n  ].filter(Boolean);\n","/* eslint-disable prettier/prettier */\nimport { resolve } from 'path';\nimport webpack from 'webpack';\nimport { Options } from 'pobpack-types';\n\nconst ExcludesFalse = Boolean as any as <T>(x: T | false) => x is T;\n\nexport default (modulePrefixPackageFields: Array<string>, options: Options): webpack.Resolve  => ({\n  // https://github.com/DefinitelyTyped/DefinitelyTyped/pull/25209\n  // cacheWithContext: false,\n\n  modules: ['node_modules', resolve('src')],\n  extensions: ([\n    options.typescript && '.ts',\n    options.typescript && '.tsx',\n    '.js',\n    '.jsx',\n  ]  as Array<string | false>).filter(ExcludesFalse),\n\n  mainFields: [\n    ...([] as Array<string | false>).concat(...modulePrefixPackageFields.map((prefix: string): Array<string | false> => ([\n      options.env !== 'production' && `module:${prefix}-dev`,\n      `module:${prefix}`,\n      // old `webpack:` syntax\n      options.env !== 'production' && `webpack:${prefix}-dev`,\n      `webpack:${prefix}`,\n    ]))),\n\n    options.env !== 'production' && 'module-dev',\n    'module',\n    // old webpack: syntax\n    options.env !== 'production' && 'webpack:main-dev',\n    'webpack:main',\n\n    ...(!modulePrefixPackageFields.includes('browser') ? [\n    ] : [\n      // Browser builds\n      options.env !== 'production' && 'browser-dev',\n      'browser',\n    ]),\n    options.env !== 'production' && 'main-dev',\n    'main',\n  ].filter(ExcludesFalse) as string[],\n\n  aliasFields: [\n    ...([] as Array<string | false>).concat(...modulePrefixPackageFields.map((prefix: string): Array<string | false> => ([\n      options.env !== 'production' && `module:aliases-${prefix}-dev`,\n      `module:aliases-${prefix}`,\n\n      // old webpack: syntax\n      options.env !== 'production' && `webpack:aliases-${prefix}-dev`,\n      `webpack:aliases-${prefix}`,\n    ]))),\n\n    options.env !== 'production' && 'module:aliases-dev',\n    'module:aliases',\n\n    // old webpack: syntax\n    options.env !== 'production' && 'webpack:aliases-dev',\n    'webpack:aliases',\n    'webpack',\n    modulePrefixPackageFields.includes('browser') && options.env !== 'production' && 'browser-dev',\n    modulePrefixPackageFields.includes('browser') && 'browser',\n  ].filter(ExcludesFalse) as string[],\n\n  alias: options.aliases,\n});\n"],"names":["options","aliases","babel","defines","entries","env","process","NODE_ENV","hmr","includeModules","includePaths","jsLoaders","moduleRules","paths","plugins","prependPlugins","resolveLoaderModules","typescript","webpackPrefixPackageFields","createWebpackConfig","wrapCreateWebpackConfig","createOptions","appWebpackConfigPath","path","resolve","existsSync","info","appWebpackConfigCreator","require","error","config","addConfig","ConsoleHandler","levels","INFO","logger","Logger","isSuccessful","messages","errors","length","warnings","FriendlyErrorsWebpackPlugin","bundleName","successMessage","context","compiler","hooks","invalid","tap","done","stats","formatWebpackMessages","toJson","success","log","critical","forEach","message","buildThrowOnError","hasErrors","Error","toString","webpackConfig","webpack","progressBar","stdout","isTTY","bar","progressPlugin","ProgressPlugin","percentage","msg","ProgressBar","chalk","yellow","bold","update","substr","apply","promisifyRun","promisify","run","bind","output","execSync","then","callback","watch","err","src","map","includeModule","realpathSync","WatchIgnorePlugin","CaseSensitivePathsPlugin","DefinePlugin","JSON","stringify","HotModuleReplacementPlugin","NormalModuleReplacementPlugin","filter","Boolean","ExcludesFalse","modulePrefixPackageFields","concat","prefix","includes"],"mappings":"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"}